---
sidebar_position: 2
---

# API искусственного интеллекта

API искусственного интеллекта обеспечивает доступ к функциональности искусственного интеллекта для анализа тем.

## Анализ темы с использованием ИИ

Этот эндпоинт позволяет отправить тему для анализа и получить развернутый результат от ИИ. Обработка запроса происходит асинхронно для обеспечения оптимальной производительности.

```
POST /ai/analyze
```

### Параметры запроса

| Поле | Тип | Описание | Обязательное |
|------|-----|----------|-------------|
| topic | String | Тема для анализа | Да |

### Пример запроса

```json
{
  "topic": "Рыночные тренды"
}
```

### Пример успешного ответа

```json
{
  "topic": "Рыночные тренды",
  "summary": "Анализ показывает рост внимания к устойчивым технологиям и инновациям...",
  "keyConcepts": [
    "Устойчивое развитие",
    "Цифровая трансформация",
    "Удаленная работа"
  ],
  "recommendations": [
    {
      "title": "Отчет McKinsey о рыночных тенденциях",
      "link": "https://www.mckinsey.com/reports"
    },
    {
      "title": "Исследование Harvard Business Review",
      "link": "https://hbr.org/research"
    }
  ],
  "timestamp": "2025-07-15T10:30:15Z"
}
```

### Обработка ошибок и фолбэк-стратегия

В случае недоступности AI-сервиса или возникновения ошибок при обработке запроса, система автоматически возвращает фолбэк-ответ, который содержит базовую информацию и полезные ссылки.

#### Пример фолбэк-ответа

```json
{
  "topic": "Рыночные тренды",
  "summary": "Не удалось проанализировать тему из-за технической проблемы. Пожалуйста, повторите запрос позднее.",
  "keyConcepts": [
    "Попробуйте позднее",
    "Свяжитесь с администратором"
  ],
  "recommendations": [
    {
      "title": "Документация по Spring Boot",
      "link": "https://spring.io/projects/spring-boot"
    },
    {
      "title": "Справочный центр",
      "link": "https://example.com/help"
    }
  ],
  "timestamp": "2025-07-15T10:30:15Z",
  "error": "Временная недоступность сервиса анализа"
}
```

### Коды ответов

| Код | Описание |
|-----|----------|
| 200 | Успешный анализ или фолбэк-ответ |
| 400 | Некорректные входные данные |
| 500 | Критическая ошибка сервера при обработке запроса |

## Управление аналитическими данными (только для администраторов)

Эндпоинт для получения списка доступных для управления аналитических тем.

```
GET /ai/manage/topics
```

### Требования

Требуется роль ADMIN.

### Пример ответа

```json
{
  "topics": [
    {
      "id": 1,
      "name": "Рыночные тренды",
      "status": "active"
    },
    {
      "id": 2,
      "name": "Анализ конкурентов",
      "status": "active"
    },
    {
      "id": 3, 
      "name": "Финансовые показатели",
      "status": "draft"
    }
  ]
}
```

## Статус ИИ-сервиса (только для администраторов)

Эндпоинт для проверки состояния ИИ-сервиса.

```
GET /ai/manage/status
```

### Требования

Требуется роль ADMIN.

### Пример ответа

```json
{
  "status": "running",
  "uptime": "4h 23m",
  "requests": 42,
  "errors": 2,
  "lastRequest": "2025-07-11T12:30:15"
}
```

## Тестовые эндпоинты

### Получить тестовый ответ

```
GET /ai/test/fallback
```

Возвращает тестовый ответ без вызова реального ИИ сервиса.

### Тестовый анализ

```
POST /ai/test/analyze
```

Тестовый эндпоинт для эмуляции анализа без вызова реальных ИИ-сервисов.

#### Параметры запроса

| Поле | Тип | Описание | Обязательное |
|------|-----|----------|-------------|
| topic | String | Тема для анализа | Да |

#### Пример запроса

```json
{
  "topic": "Тестовая тема"
}
```
